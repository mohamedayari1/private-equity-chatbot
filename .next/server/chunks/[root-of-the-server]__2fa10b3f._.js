module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},12057,(e,t,r)=>{t.exports=e.x("node:util",()=>require("node:util"))},75931,e=>{"use strict";let t={database:"log",chat:"response",auth:"response",stream:"response",api:"response",history:"response",vote:"response",document:"response",suggestions:"response"};class r extends Error{type;surface;statusCode;constructor(e,t){super();const[r,o]=e.split(":");this.type=r,this.cause=t,this.surface=o,this.message=function(e){if(e.includes("database"))return"An error occurred while executing a database query.";switch(e){case"bad_request:api":return"The request couldn't be processed. Please check your input and try again.";case"unauthorized:auth":return"You need to sign in before continuing.";case"forbidden:auth":return"Your account does not have access to this feature.";case"rate_limit:chat":return"You have exceeded your maximum number of messages for the day. Please try again later.";case"not_found:chat":return"The requested chat was not found. Please check the chat ID and try again.";case"forbidden:chat":return"This chat belongs to another user. Please check the chat ID and try again.";case"unauthorized:chat":return"You need to sign in to view this chat. Please sign in and try again.";case"offline:chat":return"We're having trouble sending your message. Please check your internet connection and try again.";case"not_found:document":return"The requested document was not found. Please check the document ID and try again.";case"forbidden:document":return"This document belongs to another user. Please check the document ID and try again.";case"unauthorized:document":return"You need to sign in to view this document. Please sign in and try again.";case"bad_request:document":return"The request to create or update the document was invalid. Please check your input and try again.";default:return"Something went wrong. Please try again later."}}(e),this.statusCode=function(e){switch(e){case"bad_request":return 400;case"unauthorized":return 401;case"forbidden":return 403;case"not_found":return 404;case"rate_limit":return 429;case"offline":return 503;default:return 500}}(this.type)}toResponse(){let e=`${this.type}:${this.surface}`,r=t[this.surface],{message:o,cause:n,statusCode:a}=this;return"log"===r?(console.error({code:e,message:o,cause:n}),Response.json({code:"",message:"Something went wrong. Please try again later."},{status:a})):Response.json({code:e,message:o,cause:n},{status:a})}}e.s(["ChatSDKError",()=>r])},59639,(e,t,r)=>{t.exports=e.x("node:process",()=>require("node:process"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},87769,(e,t,r)=>{t.exports=e.x("node:events",()=>require("node:events"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},49719,(e,t,r)=>{t.exports=e.x("assert",()=>require("assert"))},45706,(e,t,r)=>{t.exports=e.x("querystring",()=>require("querystring"))},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},60438,(e,t,r)=>{t.exports=e.x("perf_hooks",()=>require("perf_hooks"))},22632,e=>{"use strict";e.s([],54033),e.i(54033);var t=e.i(85676),r=e.i(80264);e.s(["defaultErrorMap",()=>r.default,"getErrorMap",()=>t.getErrorMap,"setErrorMap",()=>t.setErrorMap],76733),e.i(76733);var o=e.i(84488);e.s([],91316),e.i(91316);var n=e.i(42944),a=e.i(92208),s=e.i(15235);e.s(["BRAND",()=>a.BRAND,"DIRTY",()=>o.DIRTY,"EMPTY_PATH",()=>o.EMPTY_PATH,"INVALID",()=>o.INVALID,"NEVER",()=>a.NEVER,"OK",()=>o.OK,"ParseStatus",()=>o.ParseStatus,"Schema",()=>a.Schema,"ZodAny",()=>a.ZodAny,"ZodArray",()=>a.ZodArray,"ZodBigInt",()=>a.ZodBigInt,"ZodBoolean",()=>a.ZodBoolean,"ZodBranded",()=>a.ZodBranded,"ZodCatch",()=>a.ZodCatch,"ZodDate",()=>a.ZodDate,"ZodDefault",()=>a.ZodDefault,"ZodDiscriminatedUnion",()=>a.ZodDiscriminatedUnion,"ZodEffects",()=>a.ZodEffects,"ZodEnum",()=>a.ZodEnum,"ZodError",()=>s.ZodError,"ZodFirstPartyTypeKind",()=>a.ZodFirstPartyTypeKind,"ZodFunction",()=>a.ZodFunction,"ZodIntersection",()=>a.ZodIntersection,"ZodIssueCode",()=>s.ZodIssueCode,"ZodLazy",()=>a.ZodLazy,"ZodLiteral",()=>a.ZodLiteral,"ZodMap",()=>a.ZodMap,"ZodNaN",()=>a.ZodNaN,"ZodNativeEnum",()=>a.ZodNativeEnum,"ZodNever",()=>a.ZodNever,"ZodNull",()=>a.ZodNull,"ZodNullable",()=>a.ZodNullable,"ZodNumber",()=>a.ZodNumber,"ZodObject",()=>a.ZodObject,"ZodOptional",()=>a.ZodOptional,"ZodParsedType",()=>n.ZodParsedType,"ZodPipeline",()=>a.ZodPipeline,"ZodPromise",()=>a.ZodPromise,"ZodReadonly",()=>a.ZodReadonly,"ZodRecord",()=>a.ZodRecord,"ZodSchema",()=>a.ZodSchema,"ZodSet",()=>a.ZodSet,"ZodString",()=>a.ZodString,"ZodSymbol",()=>a.ZodSymbol,"ZodTransformer",()=>a.ZodTransformer,"ZodTuple",()=>a.ZodTuple,"ZodType",()=>a.ZodType,"ZodUndefined",()=>a.ZodUndefined,"ZodUnion",()=>a.ZodUnion,"ZodUnknown",()=>a.ZodUnknown,"ZodVoid",()=>a.ZodVoid,"addIssueToContext",()=>o.addIssueToContext,"any",()=>a.any,"array",()=>a.array,"bigint",()=>a.bigint,"boolean",()=>a.boolean,"coerce",()=>a.coerce,"custom",()=>a.custom,"date",()=>a.date,"datetimeRegex",()=>a.datetimeRegex,"defaultErrorMap",()=>r.default,"discriminatedUnion",()=>a.discriminatedUnion,"effect",()=>a.effect,"enum",()=>a.enum,"function",()=>a.function,"getErrorMap",()=>t.getErrorMap,"getParsedType",()=>n.getParsedType,"instanceof",()=>a.instanceof,"intersection",()=>a.intersection,"isAborted",()=>o.isAborted,"isAsync",()=>o.isAsync,"isDirty",()=>o.isDirty,"isValid",()=>o.isValid,"late",()=>a.late,"lazy",()=>a.lazy,"literal",()=>a.literal,"makeIssue",()=>o.makeIssue,"map",()=>a.map,"nan",()=>a.nan,"nativeEnum",()=>a.nativeEnum,"never",()=>a.never,"null",()=>a.null,"nullable",()=>a.nullable,"number",()=>a.number,"object",()=>a.object,"objectUtil",()=>n.objectUtil,"oboolean",()=>a.oboolean,"onumber",()=>a.onumber,"optional",()=>a.optional,"ostring",()=>a.ostring,"pipeline",()=>a.pipeline,"preprocess",()=>a.preprocess,"promise",()=>a.promise,"quotelessJson",()=>s.quotelessJson,"record",()=>a.record,"set",()=>a.set,"setErrorMap",()=>t.setErrorMap,"strictObject",()=>a.strictObject,"string",()=>a.string,"symbol",()=>a.symbol,"transformer",()=>a.transformer,"tuple",()=>a.tuple,"undefined",()=>a.undefined,"union",()=>a.union,"unknown",()=>a.unknown,"util",()=>n.util,"void",()=>a.void],35907);var i=e.i(35907);e.s(["z",0,i],22632)},64903,e=>{"use strict";var t=e.i(47909),r=e.i(74017),o=e.i(96250),n=e.i(59756),a=e.i(61916),s=e.i(74677),i=e.i(69741),d=e.i(16795),l=e.i(87718),u=e.i(95169),c=e.i(47587),p=e.i(66012),h=e.i(70101),m=e.i(74838),g=e.i(10372),x=e.i(93695);e.i(52474);var f=e.i(220),y=e.i(41752),w=e.i(75931),R=e.i(44855),b=e.i(60438),v=e.i(22632);let Z=v.z.object({id:v.z.string(),message:v.z.object({role:v.z.string(),parts:v.z.array(v.z.object({type:v.z.string(),text:v.z.string()})),id:v.z.string()}),selectedChatModel:v.z.string(),selectedVisibilityType:v.z.string(),numResults:v.z.number().optional().default(5)});async function E(e){let t,r=b.performance.now();try{let r=b.performance.now(),o=await e.json();t=Z.parse(o);let n=b.performance.now();console.log(`ðŸ“ [Parse] Request parsed in ${(n-r).toFixed(2)}ms`)}catch(e){return console.log("âŒ [Parse] Failed to parse request"),new w.ChatSDKError("bad_request:api").toResponse()}try{let e,o,{message:n,numResults:a,selectedChatModel:s}=t;console.log(`ðŸ¤– [Model] Selected chat model: ${s}`);let i=b.performance.now(),d=n.parts.filter(e=>"text"===e.type).map(e=>e.text).join(" "),l=b.performance.now();if(console.log(`ðŸ’¬ [Extract] User text extracted in ${(l-i).toFixed(2)}ms`),!d)return console.log("âŒ [Extract] No text content found"),new w.ChatSDKError("bad_request:api","No text content found").toResponse();let u=b.performance.now();try{await R.vectorSearchService.connect();let t=await R.vectorSearchService.search(d,"number"==typeof a?a:5);e={success:!0,results:t,query:d,totalResults:t.length};let r=b.performance.now();console.log(`ðŸ” [Vector Search] Found ${t.length} results in ${(r-u).toFixed(2)}ms`)}catch(r){let t=b.performance.now();console.log(`âŒ [Vector Search] Error in ${(t-u).toFixed(2)}ms:`,r),e={success:!1,results:[],query:d,totalResults:0,error:r instanceof Error?r.message:"Vector search failed"}}let c=b.performance.now(),p=e.success?e.results.map(e=>e.text):[],h=b.performance.now();console.log(`ðŸ“š [Context] Extracted ${p.length} context chunks in ${(h-c).toFixed(2)}ms`);let m=b.performance.now(),g=(o=p.length>0?p.map((e,t)=>`Context ${t+1}:
${e}`).join("\n\n"):"No relevant context found.",`You are an expert Vedic astrologer and spiritual guide with deep knowledge of ancient Indian wisdom, astrology, and philosophy. You have studied the Vedas, Upanishads, and classical astrological texts extensively. Use the following context from authentic Vedic sources to answer the user's question with authority and wisdom.

Context:
${o}

User Question: ${d}

Please provide a comprehensive and authoritative answer based on the Vedic context provided. If the context doesn't contain enough information to answer the question accurately, acknowledge this and provide insights based on your deep knowledge of Vedic astrology and philosophy. Always maintain the spiritual and philosophical depth that characterizes authentic Vedic wisdom.`),x=b.performance.now();console.log(`ðŸ“ [Prompt] RAG prompt created in ${(x-m).toFixed(2)}ms`);let f=b.performance.now(),v=await (0,y.sendGeminiRequest)({text:g,temperature:.7,maxTokens:2048}),Z=b.performance.now();if(console.log(`ðŸ”® [Gemini] Gemini response received in ${(Z-f).toFixed(2)}ms`),!v.success)return console.log("âŒ [Gemini] Gemini API failed"),new w.ChatSDKError("bad_request:api",v.error||"Failed to get response from Gemini API").toResponse();let E=b.performance.now(),q={messages:[{id:`rag-${Date.now()}`,role:"assistant",parts:[{type:"text",text:v.text}]}],id:t.id,metadata:{searchPerformed:e.success,contextChunksFound:p.length,totalSearchResults:e.totalResults,searchQuery:d,searchError:e.error}},P=b.performance.now();console.log(`ðŸ“¦ [Response] Response prepared in ${(P-E).toFixed(2)}ms`);let T=b.performance.now();return console.log(`âœ… [Total] RAG pipeline completed in ${(T-r).toFixed(2)}ms`),Response.json(q)}catch(t){let e=b.performance.now();return console.log(`âŒ [Total] RAG route error after ${(e-r).toFixed(2)}ms:`,t),new w.ChatSDKError("bad_request:api","An error occurred while processing the RAG request").toResponse()}}e.s(["POST",()=>E,"maxDuration",0,60],23758);var q=e.i(23758);let P=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/(chat)/api/rag/route",pathname:"/api/rag",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/(chat)/api/rag/route.ts",nextConfigOutput:"",userland:q}),{workAsyncStorage:T,workUnitAsyncStorage:C,serverHooks:A}=P;function S(){return(0,o.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:C})}async function N(e,t,o){P.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/(chat)/api/rag/route";y=y.replace(/\/index$/,"")||"/";let w=await P.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!w)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:R,params:b,nextConfig:v,parsedUrl:Z,isDraftMode:E,prerenderManifest:q,routerServerContext:T,isOnDemandRevalidate:C,revalidateOnlyGenerated:A,resolvedPathname:S,clientReferenceManifest:N,serverActionsManifest:k}=w,I=(0,i.normalizeAppPath)(y),D=!!(q.dynamicRoutes[I]||q.routes[S]),_=async()=>((null==T?void 0:T.render404)?await T.render404(e,t,Z,!1):t.end("This page could not be found"),null);if(D&&!E){let e=!!q.routes[S],t=q.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(v.experimental.adapterPath)return await _();throw new x.NoFallbackError}}let j=null;!D||P.isDev||E||(j="/index"===(j=S)?"/":j);let U=!0===P.isDev||!D,O=D&&!U;k&&N&&(0,s.setManifestsSingleton)({page:y,clientReferenceManifest:N,serverActionsManifest:k});let $=e.method||"GET",M=(0,a.getTracer)(),F=M.getActiveScopeSpan(),z={params:b,prerenderManifest:q,renderOpts:{experimental:{authInterrupts:!!v.experimental.authInterrupts},cacheComponents:!!v.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:v.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o,n)=>P.onRequestError(e,t,o,n,T)},sharedContext:{buildId:R}},V=new d.NodeNextRequest(e),H=new d.NodeNextResponse(t),K=l.NextRequestAdapter.fromNodeNextRequest(V,(0,l.signalFromNodeResponse)(t));try{let s=async e=>P.handle(K,z).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${$} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${$} ${y}`)}),i=!!(0,n.getRequestMeta)(e,"minimalMode"),d=async n=>{var a,d;let l=async({previousCacheEntry:r})=>{try{if(!i&&C&&A&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await s(n);e.fetchMetrics=z.renderOpts.fetchMetrics;let d=z.renderOpts.pendingWaitUntil;d&&o.waitUntil&&(o.waitUntil(d),d=void 0);let l=z.renderOpts.collectedTags;if(!D)return await (0,p.sendResponse)(V,H,a,z.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(a.headers);l&&(t[g.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==z.renderOpts.collectedRevalidate&&!(z.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&z.renderOpts.collectedRevalidate,o=void 0===z.renderOpts.collectedExpire||z.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:z.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await P.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:O,isOnDemandRevalidate:C})},!1,T),t}},u=await P.handleResponse({req:e,nextConfig:v,cacheKey:j,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:q,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:A,responseGenerator:l,waitUntil:o.waitUntil,isMinimalMode:i});if(!D)return null;if((null==u||null==(a=u.value)?void 0:a.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(d=u.value)?void 0:d.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",C?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let x=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&D||x.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||x.get("Cache-Control")||x.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,p.sendResponse)(V,H,new Response(u.value.body,{headers:x,status:u.value.status||200})),null};F?await d(F):await M.withPropagatedContext(e.headers,()=>M.trace(u.BaseServerSpan.handleRequest,{spanName:`${$} ${y}`,kind:a.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},d))}catch(t){if(t instanceof x.NoFallbackError||await P.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:O,isOnDemandRevalidate:C})},!1,T),D)throw t;return await (0,p.sendResponse)(V,H,new Response(null,{status:500})),null}}e.s(["handler",()=>N,"patchFetch",()=>S,"routeModule",()=>P,"serverHooks",()=>A,"workAsyncStorage",()=>T,"workUnitAsyncStorage",()=>C],64903)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2fa10b3f._.js.map