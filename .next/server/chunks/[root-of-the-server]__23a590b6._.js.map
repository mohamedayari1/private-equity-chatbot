{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/lib/db/queries.ts"],"sourcesContent":["// import 'server-only';\n\n// import {\n//   and,\n//   asc,\n//   count,\n//   desc,\n//   eq,\n//   gt,\n//   gte,\n//   inArray,\n//   lt,\n//   type SQL,\n// } from 'drizzle-orm';\n// import { drizzle } from 'drizzle-orm/postgres-js';\n// import postgres from 'postgres';\n\n// import {\n//   user,\n//   chat,\n//   type User,\n//   document,\n//   type Suggestion,\n//   suggestion,\n//   message,\n//   vote,\n//   type DBMessage,\n//   type Chat,\n//   stream,\n// } from './schema';\n// import type { ArtifactKind } from '@/components/artifact';\n// import { generateUUID } from '../utils';\n// import { generateHashedPassword } from './utils';\n// import type { VisibilityType } from '@/components/visibility-selector';\n// import { ChatSDKError } from '../errors';\n\n// // Optionally, if not using email/pass login, you can\n// // use the Drizzle adapter for Auth.js / NextAuth\n// // https://authjs.dev/reference/adapter/drizzle\n\n// // biome-ignore lint: Forbidden non-null assertion.\n// const client = postgres(process.env.POSTGRES_URL!);\n// const db = drizzle(client);\n\n// export async function getUser(email: string): Promise<Array<User>> {\n//   try {\n//     return await db.select().from(user).where(eq(user.email, email));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get user by email',\n//     );\n//   }\n// }\n\n// export async function createUser(email: string, password: string) {\n//   const hashedPassword = generateHashedPassword(password);\n\n//   try {\n//     return await db.insert(user).values({ email, password: hashedPassword });\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to create user');\n//   }\n// }\n\n// export async function createGuestUser() {\n//   const email = `guest-${Date.now()}`;\n//   const password = generateHashedPassword(generateUUID());\n\n//   try {\n//     return await db.insert(user).values({ email, password }).returning({\n//       id: user.id,\n//       email: user.email,\n//     });\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to create guest user',\n//     );\n//   }\n// }\n\n// export async function saveChat({\n//   id,\n//   userId,\n//   title,\n//   visibility,\n// }: {\n//   id: string;\n//   userId: string;\n//   title: string;\n//   visibility: VisibilityType;\n// }) {\n//   try {\n//     return await db.insert(chat).values({\n//       id,\n//       createdAt: new Date(),\n//       userId,\n//       title,\n//       visibility,\n//     });\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to save chat');\n//   }\n// }\n\n// export async function deleteChatById({ id }: { id: string }) {\n//   try {\n//     await db.delete(vote).where(eq(vote.chatId, id));\n//     await db.delete(message).where(eq(message.chatId, id));\n//     await db.delete(stream).where(eq(stream.chatId, id));\n\n//     const [chatsDeleted] = await db\n//       .delete(chat)\n//       .where(eq(chat.id, id))\n//       .returning();\n//     return chatsDeleted;\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to delete chat by id',\n//     );\n//   }\n// }\n\n// export async function getChatsByUserId({\n//   id,\n//   limit,\n//   startingAfter,\n//   endingBefore,\n// }: {\n//   id: string;\n//   limit: number;\n//   startingAfter: string | null;\n//   endingBefore: string | null;\n// }) {\n//   try {\n//     const extendedLimit = limit + 1;\n\n//     const query = (whereCondition?: SQL<any>) =>\n//       db\n//         .select()\n//         .from(chat)\n//         .where(\n//           whereCondition\n//             ? and(whereCondition, eq(chat.userId, id))\n//             : eq(chat.userId, id),\n//         )\n//         .orderBy(desc(chat.createdAt))\n//         .limit(extendedLimit);\n\n//     let filteredChats: Array<Chat> = [];\n\n//     if (startingAfter) {\n//       const [selectedChat] = await db\n//         .select()\n//         .from(chat)\n//         .where(eq(chat.id, startingAfter))\n//         .limit(1);\n\n//       if (!selectedChat) {\n//         throw new ChatSDKError(\n//           'not_found:database',\n//           `Chat with id ${startingAfter} not found`,\n//         );\n//       }\n\n//       filteredChats = await query(gt(chat.createdAt, selectedChat.createdAt));\n//     } else if (endingBefore) {\n//       const [selectedChat] = await db\n//         .select()\n//         .from(chat)\n//         .where(eq(chat.id, endingBefore))\n//         .limit(1);\n\n//       if (!selectedChat) {\n//         throw new ChatSDKError(\n//           'not_found:database',\n//           `Chat with id ${endingBefore} not found`,\n//         );\n//       }\n\n//       filteredChats = await query(lt(chat.createdAt, selectedChat.createdAt));\n//     } else {\n//       filteredChats = await query();\n//     }\n\n//     const hasMore = filteredChats.length > limit;\n\n//     return {\n//       chats: hasMore ? filteredChats.slice(0, limit) : filteredChats,\n//       hasMore,\n//     };\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get chats by user id',\n//     );\n//   }\n// }\n\n// export async function getChatById({ id }: { id: string }) {\n//   try {\n//     const [selectedChat] = await db.select().from(chat).where(eq(chat.id, id));\n//     return selectedChat;\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to get chat by id');\n//   }\n// }\n\n// export async function saveMessages({\n//   messages,\n// }: {\n//   messages: Array<DBMessage>;\n// }) {\n//   try {\n//     return await db.insert(message).values(messages);\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to save messages');\n//   }\n// }\n\n// export async function getMessagesByChatId({ id }: { id: string }) {\n//   try {\n//     return await db\n//       .select()\n//       .from(message)\n//       .where(eq(message.chatId, id))\n//       .orderBy(asc(message.createdAt));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get messages by chat id',\n//     );\n//   }\n// }\n\n// export async function voteMessage({\n//   chatId,\n//   messageId,\n//   type,\n// }: {\n//   chatId: string;\n//   messageId: string;\n//   type: 'up' | 'down';\n// }) {\n//   try {\n//     const [existingVote] = await db\n//       .select()\n//       .from(vote)\n//       .where(and(eq(vote.messageId, messageId)));\n\n//     if (existingVote) {\n//       return await db\n//         .update(vote)\n//         .set({ isUpvoted: type === 'up' })\n//         .where(and(eq(vote.messageId, messageId), eq(vote.chatId, chatId)));\n//     }\n//     return await db.insert(vote).values({\n//       chatId,\n//       messageId,\n//       isUpvoted: type === 'up',\n//     });\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to vote message');\n//   }\n// }\n\n// export async function getVotesByChatId({ id }: { id: string }) {\n//   try {\n//     return await db.select().from(vote).where(eq(vote.chatId, id));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get votes by chat id',\n//     );\n//   }\n// }\n\n// export async function saveDocument({\n//   id,\n//   title,\n//   kind,\n//   content,\n//   userId,\n// }: {\n//   id: string;\n//   title: string;\n//   kind: ArtifactKind;\n//   content: string;\n//   userId: string;\n// }) {\n//   try {\n//     return await db\n//       .insert(document)\n//       .values({\n//         id,\n//         title,\n//         kind,\n//         content,\n//         userId,\n//         createdAt: new Date(),\n//       })\n//       .returning();\n//   } catch (error) {\n//     throw new ChatSDKError('bad_request:database', 'Failed to save document');\n//   }\n// }\n\n// export async function getDocumentsById({ id }: { id: string }) {\n//   try {\n//     const documents = await db\n//       .select()\n//       .from(document)\n//       .where(eq(document.id, id))\n//       .orderBy(asc(document.createdAt));\n\n//     return documents;\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get documents by id',\n//     );\n//   }\n// }\n\n// export async function getDocumentById({ id }: { id: string }) {\n//   try {\n//     const [selectedDocument] = await db\n//       .select()\n//       .from(document)\n//       .where(eq(document.id, id))\n//       .orderBy(desc(document.createdAt));\n\n//     return selectedDocument;\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get document by id',\n//     );\n//   }\n// }\n\n// export async function deleteDocumentsByIdAfterTimestamp({\n//   id,\n//   timestamp,\n// }: {\n//   id: string;\n//   timestamp: Date;\n// }) {\n//   try {\n//     await db\n//       .delete(suggestion)\n//       .where(\n//         and(\n//           eq(suggestion.documentId, id),\n//           gt(suggestion.documentCreatedAt, timestamp),\n//         ),\n//       );\n\n//     return await db\n//       .delete(document)\n//       .where(and(eq(document.id, id), gt(document.createdAt, timestamp)))\n//       .returning();\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to delete documents by id after timestamp',\n//     );\n//   }\n// }\n\n// export async function saveSuggestions({\n//   suggestions,\n// }: {\n//   suggestions: Array<Suggestion>;\n// }) {\n//   try {\n//     return await db.insert(suggestion).values(suggestions);\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to save suggestions',\n//     );\n//   }\n// }\n\n// export async function getSuggestionsByDocumentId({\n//   documentId,\n// }: {\n//   documentId: string;\n// }) {\n//   try {\n//     return await db\n//       .select()\n//       .from(suggestion)\n//       .where(and(eq(suggestion.documentId, documentId)));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get suggestions by document id',\n//     );\n//   }\n// }\n\n// export async function getMessageById({ id }: { id: string }) {\n//   try {\n//     return await db.select().from(message).where(eq(message.id, id));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get message by id',\n//     );\n//   }\n// }\n\n// export async function deleteMessagesByChatIdAfterTimestamp({\n//   chatId,\n//   timestamp,\n// }: {\n//   chatId: string;\n//   timestamp: Date;\n// }) {\n//   try {\n//     const messagesToDelete = await db\n//       .select({ id: message.id })\n//       .from(message)\n//       .where(\n//         and(eq(message.chatId, chatId), gte(message.createdAt, timestamp)),\n//       );\n\n//     const messageIds = messagesToDelete.map((message) => message.id);\n\n//     if (messageIds.length > 0) {\n//       await db\n//         .delete(vote)\n//         .where(\n//           and(eq(vote.chatId, chatId), inArray(vote.messageId, messageIds)),\n//         );\n\n//       return await db\n//         .delete(message)\n//         .where(\n//           and(eq(message.chatId, chatId), inArray(message.id, messageIds)),\n//         );\n//     }\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to delete messages by chat id after timestamp',\n//     );\n//   }\n// }\n\n// export async function updateChatVisiblityById({\n//   chatId,\n//   visibility,\n// }: {\n//   chatId: string;\n//   visibility: 'private' | 'public';\n// }) {\n//   try {\n//     return await db.update(chat).set({ visibility }).where(eq(chat.id, chatId));\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to update chat visibility by id',\n//     );\n//   }\n// }\n\n// export async function getMessageCountByUserId({\n//   id,\n//   differenceInHours,\n// }: { id: string; differenceInHours: number }) {\n//   try {\n//     const twentyFourHoursAgo = new Date(\n//       Date.now() - differenceInHours * 60 * 60 * 1000,\n//     );\n\n//     const [stats] = await db\n//       .select({ count: count(message.id) })\n//       .from(message)\n//       .innerJoin(chat, eq(message.chatId, chat.id))\n//       .where(\n//         and(\n//           eq(chat.userId, id),\n//           gte(message.createdAt, twentyFourHoursAgo),\n//           eq(message.role, 'user'),\n//         ),\n//       )\n//       .execute();\n\n//     return stats?.count ?? 0;\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get message count by user id',\n//     );\n//   }\n// }\n\n// export async function createStreamId({\n//   streamId,\n//   chatId,\n// }: {\n//   streamId: string;\n//   chatId: string;\n// }) {\n//   try {\n//     await db\n//       .insert(stream)\n//       .values({ id: streamId, chatId, createdAt: new Date() });\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to create stream id',\n//     );\n//   }\n// }\n\n// export async function getStreamIdsByChatId({ chatId }: { chatId: string }) {\n//   try {\n//     const streamIds = await db\n//       .select({ id: stream.id })\n//       .from(stream)\n//       .where(eq(stream.chatId, chatId))\n//       .orderBy(asc(stream.createdAt))\n//       .execute();\n\n//     return streamIds.map(({ id }) => id);\n//   } catch (error) {\n//     throw new ChatSDKError(\n//       'bad_request:database',\n//       'Failed to get stream ids by chat id',\n//     );\n//   }\n// }\n\n// Stub functions for deployment without database\nexport async function getUser(email: string): Promise<Array<any>> {\n  // Stub function - returns empty array to indicate no user found\n  return [];\n}\n\nexport async function createUser(email: string, password: string) {\n  // Stub function - does nothing for now\n  console.log('Stub: createUser called with email:', email);\n  return null;\n}\n\nexport async function createGuestUser() {\n  // Stub function - returns mock guest user\n  return [{ id: 'guest-123', email: 'guest@example.com' }];\n}\n\nexport async function saveChat({\n  id,\n  userId,\n  title,\n  visibility,\n}: {\n  id: string;\n  userId: string;\n  title: string;\n  visibility: any;\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: saveChat called with id:', id);\n  return null;\n}\n\nexport async function deleteChatById({ id }: { id: string }) {\n  // Stub function - does nothing for now\n  console.log('Stub: deleteChatById called with id:', id);\n  return null;\n}\n\nexport async function getChatsByUserId({\n  id,\n  limit,\n  startingAfter,\n  endingBefore,\n}: {\n  id: string;\n  limit: number;\n  startingAfter: string | null;\n  endingBefore: string | null;\n}) {\n  // Stub function - returns empty chats\n  return { chats: [], hasMore: false };\n}\n\nexport async function getChatById({ id }: { id: string }) {\n  // Stub function - returns null\n  return null;\n}\n\nexport async function saveMessages({ messages }: { messages: Array<any> }) {\n  // Stub function - does nothing for now\n  console.log('Stub: saveMessages called with', messages.length, 'messages');\n  return null;\n}\n\nexport async function getMessagesByChatId({ id }: { id: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n\nexport async function voteMessage({\n  chatId,\n  messageId,\n  type,\n}: {\n  chatId: string;\n  messageId: string;\n  type: 'up' | 'down';\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: voteMessage called with type:', type);\n  return null;\n}\n\nexport async function getVotesByChatId({ id }: { id: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n\nexport async function saveDocument({\n  id,\n  title,\n  kind,\n  content,\n  userId,\n}: {\n  id: string;\n  title: string;\n  kind: any;\n  content: string;\n  userId: string;\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: saveDocument called with id:', id);\n  return null;\n}\n\nexport async function getDocumentsById({ id }: { id: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n\nexport async function getDocumentById({ id }: { id: string }) {\n  // Stub function - returns null\n  return null;\n}\n\nexport async function deleteDocumentsByIdAfterTimestamp({\n  id,\n  timestamp,\n}: {\n  id: string;\n  timestamp: Date;\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: deleteDocumentsByIdAfterTimestamp called with id:', id);\n  return null;\n}\n\nexport async function saveSuggestions({ suggestions }: { suggestions: Array<any> }) {\n  // Stub function - does nothing for now\n  console.log('Stub: saveSuggestions called with', suggestions.length, 'suggestions');\n  return null;\n}\n\nexport async function getSuggestionsByDocumentId({ documentId }: { documentId: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n\nexport async function getMessageById({ id }: { id: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n\nexport async function deleteMessagesByChatIdAfterTimestamp({\n  chatId,\n  timestamp,\n}: {\n  chatId: string;\n  timestamp: Date;\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: deleteMessagesByChatIdAfterTimestamp called with chatId:', chatId);\n  return null;\n}\n\nexport async function updateChatVisiblityById({\n  chatId,\n  visibility,\n}: {\n  chatId: string;\n  visibility: 'private' | 'public';\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: updateChatVisiblityById called with visibility:', visibility);\n  return null;\n}\n\nexport async function getMessageCountByUserId({\n  id,\n  differenceInHours,\n}: { id: string; differenceInHours: number }) {\n  // Stub function - returns 0\n  return 0;\n}\n\nexport async function createStreamId({\n  streamId,\n  chatId,\n}: {\n  streamId: string;\n  chatId: string;\n}) {\n  // Stub function - does nothing for now\n  console.log('Stub: createStreamId called with streamId:', streamId);\n  return null;\n}\n\nexport async function getStreamIdsByChatId({ chatId }: { chatId: string }) {\n  // Stub function - returns empty array\n  return [];\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/app/%28auth%29/auth.config.ts"],"sourcesContent":["import type { NextAuthConfig } from 'next-auth';\n\nexport const authConfig = {\n  pages: {\n    signIn: '/login',\n    newUser: '/',\n  },\n  providers: [\n    // added later in auth.ts since it requires bcrypt which is only compatible with Node.js\n    // while this file is also used in non-Node.js environments\n  ],\n  callbacks: {},\n} satisfies NextAuthConfig;\n"],"names":[],"mappings":";;;AAEO,MAAM,aAAa;IACxB,OAAO;QACL,QAAQ;QACR,SAAS;IACX;IACA,WAAW,EAGV;IACD,WAAW,CAAC;AACd","debugId":null}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/lib/db/utils.ts"],"sourcesContent":["import { generateId } from 'ai';\nimport { genSaltSync, hashSync } from 'bcrypt-ts';\n\nexport function generateHashedPassword(password: string) {\n  const salt = genSaltSync(10);\n  const hash = hashSync(password, salt);\n\n  return hash;\n}\n\nexport function generateDummyPassword() {\n  const password = generateId();\n  const hashedPassword = generateHashedPassword(password);\n\n  return hashedPassword;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,uBAAuB,QAAgB;IACrD,MAAM,OAAO,CAAA,GAAA,+IAAA,CAAA,cAAW,AAAD,EAAE;IACzB,MAAM,OAAO,CAAA,GAAA,+IAAA,CAAA,WAAQ,AAAD,EAAE,UAAU;IAEhC,OAAO;AACT;AAEO,SAAS;IACd,MAAM,WAAW,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD;IAC1B,MAAM,iBAAiB,uBAAuB;IAE9C,OAAO;AACT","debugId":null}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/lib/constants.ts"],"sourcesContent":["import { generateDummyPassword } from './db/utils';\n\nexport const isProductionEnvironment = process.env.NODE_ENV === 'production';\nexport const isDevelopmentEnvironment = process.env.NODE_ENV === 'development';\nexport const isTestEnvironment = Boolean(\n  process.env.PLAYWRIGHT_TEST_BASE_URL ||\n    process.env.PLAYWRIGHT ||\n    process.env.CI_PLAYWRIGHT,\n);\n\nexport const guestRegex = /^guest-\\d+$/;\n\nexport const DUMMY_PASSWORD = generateDummyPassword();\n"],"names":[],"mappings":";;;;;;;AAAA;;AAEO,MAAM,0BAA0B,oDAAyB;AACzD,MAAM,2BAA2B,oDAAyB;AAC1D,MAAM,oBAAoB,QAC/B,QAAQ,GAAG,CAAC,wBAAwB,IAClC,QAAQ,GAAG,CAAC,UAAU,IACtB,QAAQ,GAAG,CAAC,aAAa;AAGtB,MAAM,aAAa;AAEnB,MAAM,iBAAiB,CAAA,GAAA,oHAAA,CAAA,wBAAqB,AAAD","debugId":null}},
    {"offset": {"line": 803, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/app/%28auth%29/auth.ts"],"sourcesContent":["import { compare } from 'bcrypt-ts';\nimport NextAuth, { type DefaultSession } from 'next-auth';\nimport Credentials from 'next-auth/providers/credentials';\nimport { createGuestUser, getUser } from '@/lib/db/queries';\nimport { authConfig } from './auth.config';\nimport { DUMMY_PASSWORD } from '@/lib/constants';\nimport type { DefaultJWT } from 'next-auth/jwt';\n\nexport type UserType = 'guest' | 'regular';\n\ndeclare module 'next-auth' {\n  interface Session extends DefaultSession {\n    user: {\n      id: string;\n      type: UserType;\n    } & DefaultSession['user'];\n  }\n\n  interface User {\n    id?: string;\n    email?: string | null;\n    type: UserType;\n  }\n}\n\ndeclare module 'next-auth/jwt' {\n  interface JWT extends DefaultJWT {\n    id: string;\n    type: UserType;\n  }\n}\n\nexport const {\n  handlers: { GET, POST },\n  auth,\n  signIn,\n  signOut,\n} = NextAuth({\n  ...authConfig,\n  providers: [\n    Credentials({\n      credentials: {},\n      async authorize({ email, password }: any) {\n        const users = await getUser(email);\n\n        if (users.length === 0) {\n          await compare(password, DUMMY_PASSWORD);\n          return null;\n        }\n\n        const [user] = users;\n\n        if (!user.password) {\n          await compare(password, DUMMY_PASSWORD);\n          return null;\n        }\n\n        const passwordsMatch = await compare(password, user.password);\n\n        if (!passwordsMatch) return null;\n\n        return { ...user, type: 'regular' };\n      },\n    }),\n    Credentials({\n      id: 'guest',\n      credentials: {},\n      async authorize() {\n        const [guestUser] = await createGuestUser();\n        return { ...guestUser, type: 'guest' };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id as string;\n        token.type = user.type;\n      }\n\n      return token;\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        session.user.id = token.id;\n        session.user.type = token.type;\n      }\n\n      return session;\n    },\n  },\n});\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AA2BO,MAAM,EACX,UAAU,EAAE,GAAG,EAAE,IAAI,EAAE,EACvB,IAAI,EACJ,MAAM,EACN,OAAO,EACR,GAAG,CAAA,GAAA,uJAAA,CAAA,UAAQ,AAAD,EAAE;IACX,GAAG,mIAAA,CAAA,aAAU;IACb,WAAW;QACT,CAAA,GAAA,4JAAA,CAAA,UAAW,AAAD,EAAE;YACV,aAAa,CAAC;YACd,MAAM,WAAU,EAAE,KAAK,EAAE,QAAQ,EAAO;gBACtC,MAAM,QAAQ,MAAM,CAAA,GAAA,sHAAA,CAAA,UAAO,AAAD,EAAE;gBAE5B,IAAI,MAAM,MAAM,KAAK,GAAG;oBACtB,MAAM,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD,EAAE,UAAU,kHAAA,CAAA,iBAAc;oBACtC,OAAO;gBACT;gBAEA,MAAM,CAAC,KAAK,GAAG;gBAEf,IAAI,CAAC,KAAK,QAAQ,EAAE;oBAClB,MAAM,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD,EAAE,UAAU,kHAAA,CAAA,iBAAc;oBACtC,OAAO;gBACT;gBAEA,MAAM,iBAAiB,MAAM,CAAA,GAAA,+IAAA,CAAA,UAAO,AAAD,EAAE,UAAU,KAAK,QAAQ;gBAE5D,IAAI,CAAC,gBAAgB,OAAO;gBAE5B,OAAO;oBAAE,GAAG,IAAI;oBAAE,MAAM;gBAAU;YACpC;QACF;QACA,CAAA,GAAA,4JAAA,CAAA,UAAW,AAAD,EAAE;YACV,IAAI;YACJ,aAAa,CAAC;YACd,MAAM;gBACJ,MAAM,CAAC,UAAU,GAAG,MAAM,CAAA,GAAA,sHAAA,CAAA,kBAAe,AAAD;gBACxC,OAAO;oBAAE,GAAG,SAAS;oBAAE,MAAM;gBAAQ;YACvC;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YAEA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YAEA,OAAO;QACT;IACF;AACF","debugId":null}},
    {"offset": {"line": 883, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/lib/errors.ts"],"sourcesContent":["export type ErrorType =\n  | 'bad_request'\n  | 'unauthorized'\n  | 'forbidden'\n  | 'not_found'\n  | 'rate_limit'\n  | 'offline';\n\nexport type Surface =\n  | 'chat'\n  | 'auth'\n  | 'api'\n  | 'stream'\n  | 'database'\n  | 'history'\n  | 'vote'\n  | 'document'\n  | 'suggestions';\n\nexport type ErrorCode = `${ErrorType}:${Surface}`;\n\nexport type ErrorVisibility = 'response' | 'log' | 'none';\n\nexport const visibilityBySurface: Record<Surface, ErrorVisibility> = {\n  database: 'log',\n  chat: 'response',\n  auth: 'response',\n  stream: 'response',\n  api: 'response',\n  history: 'response',\n  vote: 'response',\n  document: 'response',\n  suggestions: 'response',\n};\n\nexport class ChatSDKError extends Error {\n  public type: ErrorType;\n  public surface: Surface;\n  public statusCode: number;\n\n  constructor(errorCode: ErrorCode, cause?: string) {\n    super();\n\n    const [type, surface] = errorCode.split(':');\n\n    this.type = type as ErrorType;\n    this.cause = cause;\n    this.surface = surface as Surface;\n    this.message = getMessageByErrorCode(errorCode);\n    this.statusCode = getStatusCodeByType(this.type);\n  }\n\n  public toResponse() {\n    const code: ErrorCode = `${this.type}:${this.surface}`;\n    const visibility = visibilityBySurface[this.surface];\n\n    const { message, cause, statusCode } = this;\n\n    if (visibility === 'log') {\n      console.error({\n        code,\n        message,\n        cause,\n      });\n\n      return Response.json(\n        { code: '', message: 'Something went wrong. Please try again later.' },\n        { status: statusCode },\n      );\n    }\n\n    return Response.json({ code, message, cause }, { status: statusCode });\n  }\n}\n\nexport function getMessageByErrorCode(errorCode: ErrorCode): string {\n  if (errorCode.includes('database')) {\n    return 'An error occurred while executing a database query.';\n  }\n\n  switch (errorCode) {\n    case 'bad_request:api':\n      return \"The request couldn't be processed. Please check your input and try again.\";\n\n    case 'unauthorized:auth':\n      return 'You need to sign in before continuing.';\n    case 'forbidden:auth':\n      return 'Your account does not have access to this feature.';\n\n    case 'rate_limit:chat':\n      return 'You have exceeded your maximum number of messages for the day. Please try again later.';\n    case 'not_found:chat':\n      return 'The requested chat was not found. Please check the chat ID and try again.';\n    case 'forbidden:chat':\n      return 'This chat belongs to another user. Please check the chat ID and try again.';\n    case 'unauthorized:chat':\n      return 'You need to sign in to view this chat. Please sign in and try again.';\n    case 'offline:chat':\n      return \"We're having trouble sending your message. Please check your internet connection and try again.\";\n\n    case 'not_found:document':\n      return 'The requested document was not found. Please check the document ID and try again.';\n    case 'forbidden:document':\n      return 'This document belongs to another user. Please check the document ID and try again.';\n    case 'unauthorized:document':\n      return 'You need to sign in to view this document. Please sign in and try again.';\n    case 'bad_request:document':\n      return 'The request to create or update the document was invalid. Please check your input and try again.';\n\n    default:\n      return 'Something went wrong. Please try again later.';\n  }\n}\n\nfunction getStatusCodeByType(type: ErrorType) {\n  switch (type) {\n    case 'bad_request':\n      return 400;\n    case 'unauthorized':\n      return 401;\n    case 'forbidden':\n      return 403;\n    case 'not_found':\n      return 404;\n    case 'rate_limit':\n      return 429;\n    case 'offline':\n      return 503;\n    default:\n      return 500;\n  }\n}\n"],"names":[],"mappings":";;;;;AAuBO,MAAM,sBAAwD;IACnE,UAAU;IACV,MAAM;IACN,MAAM;IACN,QAAQ;IACR,KAAK;IACL,SAAS;IACT,MAAM;IACN,UAAU;IACV,aAAa;AACf;AAEO,MAAM,qBAAqB;IACzB,KAAgB;IAChB,QAAiB;IACjB,WAAmB;IAE1B,YAAY,SAAoB,EAAE,KAAc,CAAE;QAChD,KAAK;QAEL,MAAM,CAAC,MAAM,QAAQ,GAAG,UAAU,KAAK,CAAC;QAExC,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,OAAO,GAAG,sBAAsB;QACrC,IAAI,CAAC,UAAU,GAAG,oBAAoB,IAAI,CAAC,IAAI;IACjD;IAEO,aAAa;QAClB,MAAM,OAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE;QACtD,MAAM,aAAa,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC;QAEpD,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAI;QAE3C,IAAI,eAAe,OAAO;YACxB,QAAQ,KAAK,CAAC;gBACZ;gBACA;gBACA;YACF;YAEA,OAAO,SAAS,IAAI,CAClB;gBAAE,MAAM;gBAAI,SAAS;YAAgD,GACrE;gBAAE,QAAQ;YAAW;QAEzB;QAEA,OAAO,SAAS,IAAI,CAAC;YAAE;YAAM;YAAS;QAAM,GAAG;YAAE,QAAQ;QAAW;IACtE;AACF;AAEO,SAAS,sBAAsB,SAAoB;IACxD,IAAI,UAAU,QAAQ,CAAC,aAAa;QAClC,OAAO;IACT;IAEA,OAAQ;QACN,KAAK;YACH,OAAO;QAET,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QAET,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QAET,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QAET;YACE,OAAO;IACX;AACF;AAEA,SAAS,oBAAoB,IAAe;IAC1C,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF","debugId":null}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///home/o__bit__o/projects/actum-agent/full-stack-chatbot/app/%28chat%29/api/history/route.ts"],"sourcesContent":["import { auth } from '@/app/(auth)/auth';\nimport type { NextRequest } from 'next/server';\nimport { getChatsByUserId } from '@/lib/db/queries';\nimport { ChatSDKError } from '@/lib/errors';\n\nexport async function GET(request: NextRequest) {\n  const { searchParams } = request.nextUrl;\n\n  const limit = Number.parseInt(searchParams.get('limit') || '10');\n  const startingAfter = searchParams.get('starting_after');\n  const endingBefore = searchParams.get('ending_before');\n\n  if (startingAfter && endingBefore) {\n    return new ChatSDKError(\n      'bad_request:api',\n      'Only one of starting_after or ending_before can be provided.',\n    ).toResponse();\n  }\n\n  const session = await auth();\n\n  if (!session?.user) {\n    return new ChatSDKError('unauthorized:chat').toResponse();\n  }\n\n  const chats = await getChatsByUserId({\n    id: session.user.id,\n    limit,\n    startingAfter,\n    endingBefore,\n  });\n\n  return Response.json(chats);\n}\n"],"names":[],"mappings":";;;AAAA;AAEA;AACA;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,QAAQ,OAAO;IAExC,MAAM,QAAQ,OAAO,QAAQ,CAAC,aAAa,GAAG,CAAC,YAAY;IAC3D,MAAM,gBAAgB,aAAa,GAAG,CAAC;IACvC,MAAM,eAAe,aAAa,GAAG,CAAC;IAEtC,IAAI,iBAAiB,cAAc;QACjC,OAAO,IAAI,+GAAA,CAAA,eAAY,CACrB,mBACA,gEACA,UAAU;IACd;IAEA,MAAM,UAAU,MAAM,CAAA,GAAA,yHAAA,CAAA,OAAI,AAAD;IAEzB,IAAI,CAAC,SAAS,MAAM;QAClB,OAAO,IAAI,+GAAA,CAAA,eAAY,CAAC,qBAAqB,UAAU;IACzD;IAEA,MAAM,QAAQ,MAAM,CAAA,GAAA,sHAAA,CAAA,mBAAgB,AAAD,EAAE;QACnC,IAAI,QAAQ,IAAI,CAAC,EAAE;QACnB;QACA;QACA;IACF;IAEA,OAAO,SAAS,IAAI,CAAC;AACvB","debugId":null}}]
}